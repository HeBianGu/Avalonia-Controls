<Application x:Class="HeBianGu.Test.Main.App"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:h="https://github.com/HeBianGu"
             xmlns:v="clr-namespace:HeBianGu.Test.Main.Views"
             RequestedThemeVariant="Default">
    <!--  "Default" ThemeVariant follows system theme variant. "Dark" or "Light" are other available options.  -->

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceInclude Source="avares://HeBianGu.Avalonia.Controls.Form/Form.axaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
    <Application.Styles>
        <FluentTheme />
        <StyleInclude Source="avares://HeBianGu.Controls.MultiComboBox/Styles/MultiComboBox.xaml" />
        <StyleInclude Source="avares://HeBianGu.Controls.TemplateControl/MyTemplatedControl.axaml" />
        <!--<StyleInclude Source="avares://HeBianGu.Avalonia.Windows.Dialog/DialogWindow.axaml" />-->
        <StyleInclude Source="avares://HeBianGu.Avalonia.Windows.Dialog/Styles.axaml" />
    </Application.Styles>
    <Application.DataTemplates>
        <DataTemplate DataType="v:AdornerDialogPresenter">
            <Grid>
                <Grid.Background>
                    <SolidColorBrush Opacity="0.6" Color="Red" />
                </Grid.Background>
                <Grid Width="{Binding Width}"
                      Height="{Binding Height}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      RowDefinitions="Auto,*,Auto">
                    <Button HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Command="{v:CloseAdornerDialogCommand}"
                            CommandParameter="{Binding}"
                            Content="×" />
                    <Grid.Background>
                        <SolidColorBrush Opacity="0.6" Color="Orange" />
                    </Grid.Background>
                    <TextBlock Margin="10,6" Text="{Binding Title}" />
                    <ContentControl Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Content="{Binding Presenter}" />
                    <Button Grid.Row="2"
                            Margin="10,6"
                            HorizontalAlignment="Center"
                            Command="{v:CloseAdornerDialogCommand}"
                            CommandParameter="{Binding}"
                            Content="确定" />
                </Grid>

            </Grid>
        </DataTemplate>
        <DataTemplate DataType="v:Student">
            <Grid>
                <TextBlock Text="{Binding Name}" />
            </Grid>
        </DataTemplate>
        <DataTemplate DataType="h:TextPropertyItem">
            <TextBox Margin="0,2"
                     VerticalContentAlignment="Center"
                     IsReadOnly="{Binding ReadOnly}"
                     Text="{Binding Value}"
                     TextWrapping="{Binding TextWrapping}"
                     ToolTip.Tip="{Binding Message}" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type h:SettingViewPresenter}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TabControl ItemsSource="{Binding Data}">
                    <TabControl.ContentTemplate>
                        <DataTemplate>
                            <TabControl Margin="0"
                                        Padding="0,0,0,0"
                                        HorizontalContentAlignment="Stretch"
                                        ItemsSource="{Binding}"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        TabStripPlacement="Left">
                                <TabControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock MinWidth="120" Text="{Binding Name}" />
                                    </DataTemplate>
                                </TabControl.ItemTemplate>

                                <TabControl.ContentTemplate>
                                    <DataTemplate DataType="{x:Type h:ISettable}">
                                        <Expander HorizontalAlignment="Stretch"
                                                  VerticalAlignment="Top"
                                                  BorderBrush="Transparent"
                                                  Header="{Binding}"
                                                  IsExpanded="True">
                                            <Expander.HeaderTemplate>
                                                <DataTemplate>
                                                    <DockPanel>
                                                        <TextBlock Margin="10,0,0,0"
                                                                   VerticalAlignment="Bottom"
                                                                   FontWeight="Bold"
                                                                   Text="{Binding Name}"
                                                                   ToolTip.Tip="{Binding Description}" />
                                                    </DockPanel>
                                                </DataTemplate>
                                            </Expander.HeaderTemplate>
                                            <h:Form ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectObject="{Binding}" />
                                        </Expander>
                                    </DataTemplate>
                                </TabControl.ContentTemplate>
                            </TabControl>
                        </DataTemplate>
                    </TabControl.ContentTemplate>
                    <TabControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Margin="10,0" Text="{Binding Key}" />
                        </DataTemplate>
                    </TabControl.ItemTemplate>
                    <!--<TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    -->
                    <!--<Setter Property="h:Cattach.GuideData" Value="{Binding Descption}" />-->
                    <!--<Setter Property="h:Cattach.GuideTitle" Value="{Binding Key}" />
                    <Setter Property="h:Cattach.GuideUseClick" Value="True" />
                    <Setter Property="h:Cattach.UseGuide" Value="True" />-->
                    <!--
                </Style>
            </TabControl.ItemContainerStyle>-->
                </TabControl>

                <DockPanel Grid.Row="1"
                           Margin="0,5,0,0"
                           Background="Transparent"
                           DockPanel.Dock="Bottom"
                           LastChildFill="False">

                    <Button Margin="0"
                            Command="{h:SettingDefaultCommand}"
                            Content="恢复默认"
                            DockPanel.Dock="Left"
                            ToolTip.Tip="此功能会重新加载参数默认配置" />

                    <Button Margin="10,0"
                            Command="{h:ClearSettingDataCommand}"
                            Content="初始化配置(重启以生效)"
                            DockPanel.Dock="Left"
                            ToolTip.Tip="此功能会清空配置文件，重启后重新加载" />

                    <Button MinWidth="100"
                            Margin="2,0"
                            Command="{h:SumitDialogCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"
                            Content="确定"
                            DockPanel.Dock="Right" />

                    <!--<Button MinWidth="100"
                        Margin="2,0"
                        Command="{CloseDialogCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"
                        Content="取消"
                        DockPanel.Dock="Right" />-->
                </DockPanel>
            </Grid>
        </DataTemplate>

    </Application.DataTemplates>
</Application>
